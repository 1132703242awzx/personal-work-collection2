# 北京市交互式3D地形图生成器

## 项目简介

这是一个专业的Python项目，用于生成北京市的交互式3D地形图。项目使用NASA的SRTM数字高程模型数据，结合北京市行政边界，创建精美的三维地形可视化效果。

## 主要特性

- 🌍 **自动数据获取**: 自动下载SRTM高程数据和北京市边界数据
- 🗺️ **精确边界裁剪**: 按北京市行政边界精确裁剪地形数据
- 🏔️ **3D交互式可视化**: 使用PyVista创建可旋转、缩放、平移的3D地形图
- 🎨 **专业地形着色**: 使用'gist_earth'色彩映射，清晰展现山脉和平原
- 📊 **2D预览图**: 同时生成等高线图和3D预览图

## 技术栈

- **数据获取**: `elevation`, `requests`
- **地理数据处理**: `xarray`, `rioxarray`, `geopandas`, `rasterio`
- **3D可视化**: `PyVista` (基于VTK)
- **科学计算**: `numpy`, `matplotlib`

## 系统要求

- Python 3.8+
- Windows/Linux/macOS
- 至少2GB内存
- 网络连接（用于下载数据）

## 安装和运行

### 方法一：使用启动器（推荐）

```bash
python launcher.py
```

启动器提供用户友好的菜单界面，可以选择：
- 基础版：快速生成，适合初次体验
- 增强版：高精度地形，包含地标和分析报告
- 查看项目说明
- 退出程序

### 方法二：直接运行

#### 基础版
```bash
python main.py
```

#### 增强版
```bash
python enhanced_main.py
```

### 安装依赖

```bash
pip install -r requirements.txt
```

## 版本说明

### 基础版 (`main.py`)
- ✅ 快速生成3D地形图
- ✅ 基本交互功能
- ✅ 2D预览图
- ✅ 简单地形模拟
- ⏱️ 运行时间: ~30秒

### 增强版 (`enhanced_main.py`)  
- ✅ 高精度地形建模
- ✅ 地标标注显示
- ✅ 等高线叠加
- ✅ 地形统计分析
- ✅ 坡度分析
- ✅ 综合分析报告
- ✅ 高级渲染效果
- ⏱️ 运行时间: ~60秒

### 推荐使用场景
- **学习演示**: 使用基础版
- **专业分析**: 使用增强版
- **首次体验**: 使用启动器选择

## 程序流程

1. **下载北京市边界数据** - 从网络获取GeoJSON格式的北京市边界
2. **下载SRTM高程数据** - 自动下载覆盖北京地区的高程数据
3. **数据处理和裁剪** - 将高程数据裁剪到北京市边界内
4. **生成2D预览图** - 创建等高线图和3D预览
5. **启动3D交互式窗口** - 显示可交互的3D地形图

## 交互操作

在3D地形图窗口中：
- **鼠标左键拖拽**: 旋转视角
- **鼠标右键拖拽**: 平移视图
- **鼠标滚轮**: 缩放
- **按键'r'**: 重置到默认视角

## 地形特征

生成的3D地形图能够清晰展现：
- 🏔️ **西山山脉** - 北京西部的主要山脉
- ⛰️ **军都山** - 北京北部山区
- 🌆 **北京城区** - 相对平坦的城市区域
- 🗻 **其他山峰** - 香山、八达岭等著名地标

## 输出文件

程序运行后会在`data/`目录下生成：
- `beijing_boundary.geojson` - 北京市边界数据
- `beijing_dem.tif` - 处理后的高程数据
- `beijing_terrain_preview.png` - 2D预览图

## 故障排除

### 网络问题
如果数据下载失败，程序会自动使用备用数据源或生成合成地形数据。

### 内存不足
如果遇到内存问题，可以在代码中调整数据采样率。

### 显示问题
确保您的系统支持OpenGL，这是PyVista正常运行的必要条件。

## 自定义配置

可以通过修改`config.py`文件来调整：
- 地理边界范围
- 可视化参数
- 色彩映射方案
- 窗口大小等

## 开发者信息

- 作者：专业Python数据可视化工程师
- 版本：1.0
- 日期：2025年8月21日

## 许可证

本项目仅供学习和研究使用。

---

**注意**: 首次运行时需要下载约100-200MB的地形数据，请确保网络连接稳定。
