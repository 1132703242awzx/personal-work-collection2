# 股票分析与预测系统

## 系统简介

这是一个基于残差通道-空间注意力网络（R-CSAN）的股票预测系统，能够：

- 🚀 从东方财富和新浪财经自动获取股票数据
- 🧠 使用先进的深度学习模型进行股价预测
- 📊 生成详细的技术分析图表和报告
- 🔮 预测未来7天的股价走势

## 功能特点

### 1. 数据获取
- 支持从东方财富API获取历史股票数据
- 新浪财经作为备用数据源
- 自动计算技术指标（MA、RSI、MACD、布林带等）
- 支持获取最近200天的完整交易数据

### 2. 模型架构 (R-CSAN)
- **残差连接**: 解决深度网络的梯度消失问题
- **通道注意力**: 自动学习重要特征的权重
- **空间注意力**: 关注时间序列中的关键时间点
- **Transformer编码器**: 捕捉长期依赖关系
- **双向LSTM**: 增强序列建模能力

### 3. 可视化功能
- 交互式K线图
- 技术指标图表
- 预测结果可视化
- 完整的分析报告

## 安装说明

### 1. 环境要求
- Python 3.8+
- Windows 10/11
- 至少4GB内存

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 验证安装
```bash
python main.py
```

## 使用指南

### 快速开始

1. **运行程序**
   ```bash
   python main.py
   ```

2. **选择运行模式**
   - 交互模式：完整功能体验
   - 快速演示：一键生成分析报告

3. **输入股票代码**
   - 上海股票：6开头（如：600000）
   - 深圳股票：0或3开头（如：000001、300015）

### 详细操作

#### 1. 获取股票数据
- 输入6位股票代码
- 选择获取天数（建议200天以上）
- 系统自动从多个数据源获取数据

#### 2. 训练预测模型
- 系统自动准备训练数据
- 使用R-CSAN网络进行训练
- 训练过程包含验证和早停机制

#### 3. 预测未来股价
- 基于最近60天数据预测未来7天
- 显示具体价格和涨跌幅
- 提供趋势判断

#### 4. 生成分析报告
- 股票概览图
- 交互式K线图
- 预测结果图
- Markdown格式分析报告

## 文件结构

```
股票分析/
├── main.py              # 主程序入口
├── data_crawler.py      # 数据爬虫模块
├── rcsan_model.py       # R-CSAN模型定义
├── visualizer.py        # 可视化模块
├── config.py           # 配置文件
├── requirements.txt    # 依赖包列表
├── README.md          # 使用说明
├── data/              # 数据目录
├── models/            # 模型保存目录
├── output/            # 输出文件目录
└── logs/              # 日志目录
```

## 技术指标说明

### 移动平均线 (MA)
- **MA5**: 5日移动平均线，短期趋势
- **MA10**: 10日移动平均线，中短期趋势
- **MA20**: 20日移动平均线，中期趋势
- **MA60**: 60日移动平均线，长期趋势

### RSI相对强弱指标
- **范围**: 0-100
- **超买**: RSI > 70
- **超卖**: RSI < 30
- **用途**: 判断股票买卖时机

### MACD指标
- **MACD线**: 快线与慢线的差值
- **信号线**: MACD线的9日移动平均
- **柱状图**: MACD线与信号线的差值

### 布林带
- **中轨**: 20日移动平均线
- **上轨**: 中轨 + 2倍标准差
- **下轨**: 中轨 - 2倍标准差

## 模型参数调优

### 关键参数说明
- `sequence_length`: 输入序列长度，建议30-120
- `hidden_dim`: 隐藏层维度，影响模型复杂度
- `num_layers`: 网络层数，建议2-6层
- `learning_rate`: 学习率，建议1e-4到1e-2
- `batch_size`: 批次大小，根据内存调整

### 训练建议
1. **数据量充足**：至少200天历史数据
2. **合理epoch**：100-500轮，观察收敛情况
3. **验证监控**：关注验证损失，避免过拟合
4. **早停机制**：自动停止训练，节省时间

## 常见问题

### Q: 数据获取失败怎么办？
A: 
1. 检查网络连接
2. 确认股票代码正确
3. 尝试不同的股票代码
4. 检查防火墙设置

### Q: 训练时间过长？
A: 
1. 减少训练轮数
2. 降低模型复杂度
3. 使用GPU加速
4. 减少数据量

### Q: 预测准确性如何提高？
A: 
1. 增加数据量
2. 添加更多技术指标
3. 调整模型参数
4. 使用集成方法

### Q: 内存不足怎么办？
A: 
1. 减少batch_size
2. 降低sequence_length
3. 减少hidden_dim
4. 清理其他程序

## 风险提示

⚠️ **重要声明**
1. 本系统仅供学习和研究使用
2. 预测结果不构成投资建议
3. 股市有风险，投资需谨慎
4. 请结合基本面分析做决策
5. 建议分散投资，控制风险

## 技术支持

### 系统要求
- **操作系统**: Windows 10/11
- **Python版本**: 3.8+
- **内存**: 4GB+
- **存储**: 1GB可用空间

### 依赖包版本
- torch >= 1.12.0
- pandas >= 1.3.0
- numpy >= 1.21.0
- matplotlib >= 3.5.0
- requests >= 2.25.0

### 更新日志
- **v1.0.0**: 初始版本发布
- 支持基础数据获取和模型预测
- 实现R-CSAN网络架构
- 添加可视化功能

## 扩展功能计划

### 短期计划
- [ ] 支持更多股票交易所
- [ ] 添加实时数据推送
- [ ] 增加更多技术指标
- [ ] 模型集成功能

### 长期计划
- [ ] Web界面开发
- [ ] 移动端应用
- [ ] 云端部署
- [ ] 社区版本

## 联系方式

如有问题或建议，请通过以下方式联系：
- 邮箱: stock.analysis@example.com
- 项目地址: https://github.com/your-repo/stock-analysis

---

**免责声明**: 本软件仅供教育和研究目的使用，不构成任何投资建议。用户在使用本软件进行投资决策时，应当承担全部风险和责任。
