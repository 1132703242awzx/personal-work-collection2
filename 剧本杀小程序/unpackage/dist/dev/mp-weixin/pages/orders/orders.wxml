<view class="page data-v-8a71bbb4"><view class="filter-tabs data-v-8a71bbb4"><view data-event-opts="{{[['tap',[['switchTab',['all']]]]]}}" class="{{['tab-item','data-v-8a71bbb4',(activeTab==='all')?'active':'']}}" bindtap="__e"><text class="data-v-8a71bbb4">全部</text></view><view data-event-opts="{{[['tap',[['switchTab',['upcoming']]]]]}}" class="{{['tab-item','data-v-8a71bbb4',(activeTab==='upcoming')?'active':'']}}" bindtap="__e"><text class="data-v-8a71bbb4">待参加</text></view><view data-event-opts="{{[['tap',[['switchTab',['completed']]]]]}}" class="{{['tab-item','data-v-8a71bbb4',(activeTab==='completed')?'active':'']}}" bindtap="__e"><text class="data-v-8a71bbb4">已完成</text></view><view data-event-opts="{{[['tap',[['switchTab',['cancelled']]]]]}}" class="{{['tab-item','data-v-8a71bbb4',(activeTab==='cancelled')?'active':'']}}" bindtap="__e"><text class="data-v-8a71bbb4">已取消</text></view></view><block wx:if="{{$root.g0>0}}"><view class="orders-list data-v-8a71bbb4"><block wx:for="{{$root.l0}}" wx:for-item="order" wx:for-index="__i0__" wx:key="id"><view class="order-card data-v-8a71bbb4"><view class="order-header data-v-8a71bbb4"><text class="order-number data-v-8a71bbb4">{{"订单号："+order.$orig.orderNumber}}</text><view class="{{['order-status','data-v-8a71bbb4',order.$orig.status]}}"><text class="data-v-8a71bbb4">{{order.m0}}</text></view></view><view class="order-content data-v-8a71bbb4"><image class="script-cover data-v-8a71bbb4" src="{{order.$orig.scriptCover}}"></image><view class="order-info data-v-8a71bbb4"><text class="script-name data-v-8a71bbb4">{{order.$orig.scriptName}}</text><view class="order-details data-v-8a71bbb4"><view class="detail-row data-v-8a71bbb4"><text class="detail-label data-v-8a71bbb4">游戏时间：</text><text class="detail-value data-v-8a71bbb4">{{order.$orig.playDate+" "+order.$orig.startTime}}</text></view><view class="detail-row data-v-8a71bbb4"><text class="detail-label data-v-8a71bbb4">游戏时长：</text><text class="detail-value data-v-8a71bbb4">{{order.$orig.duration+"小时"}}</text></view><view class="detail-row data-v-8a71bbb4"><text class="detail-label data-v-8a71bbb4">预约人数：</text><text class="detail-value data-v-8a71bbb4">{{order.$orig.playerCount+"人"}}</text></view><view class="detail-row data-v-8a71bbb4"><text class="detail-label data-v-8a71bbb4">联系方式：</text><text class="detail-value data-v-8a71bbb4">{{order.$orig.contactName+" "+order.$orig.contactPhone}}</text></view></view></view></view><view class="order-price data-v-8a71bbb4"><text class="price-label data-v-8a71bbb4">总计：</text><text class="price-value data-v-8a71bbb4">{{"¥"+order.$orig.totalPrice}}</text></view><view class="order-actions data-v-8a71bbb4"><block wx:if="{{order.$orig.status==='upcoming'}}"><view data-event-opts="{{[['tap',[['cancelOrder',['$0'],[[['filteredOrders','id',order.$orig.id]]]]]]]}}" class="action-btn secondary data-v-8a71bbb4" bindtap="__e"><text class="data-v-8a71bbb4">取消预约</text></view></block><view data-event-opts="{{[['tap',[['contactStore',['$event']]]]]}}" class="action-btn secondary data-v-8a71bbb4" bindtap="__e"><text class="data-v-8a71bbb4">联系客服</text></view><block wx:if="{{order.$orig.status==='upcoming'}}"><view data-event-opts="{{[['tap',[['modifyOrder',['$0'],[[['filteredOrders','id',order.$orig.id]]]]]]]}}" class="action-btn primary data-v-8a71bbb4" bindtap="__e"><text class="data-v-8a71bbb4">修改预约</text></view></block><block wx:if="{{order.$orig.status==='completed'}}"><view data-event-opts="{{[['tap',[['reviewOrder',['$0'],[[['filteredOrders','id',order.$orig.id]]]]]]]}}" class="action-btn primary data-v-8a71bbb4" bindtap="__e"><text class="data-v-8a71bbb4">评价</text></view></block><view data-event-opts="{{[['tap',[['rebookOrder',['$0'],[[['filteredOrders','id',order.$orig.id]]]]]]]}}" class="action-btn primary data-v-8a71bbb4" bindtap="__e"><text class="data-v-8a71bbb4">再次预约</text></view></view><block wx:if="{{order.$orig.status==='upcoming'&&order.$orig.countdown>0}}"><view class="countdown data-v-8a71bbb4"><text class="countdown-text data-v-8a71bbb4">{{"距离游戏开始还有："+order.m1}}</text></view></block></view></block></view></block><block wx:else><view class="empty-state data-v-8a71bbb4"><image class="empty-image data-v-8a71bbb4" src="/static/empty-orders.png"></image><text class="empty-text data-v-8a71bbb4">暂无预约记录</text><view data-event-opts="{{[['tap',[['goToReservation',['$event']]]]]}}" class="empty-action data-v-8a71bbb4" bindtap="__e"><text class="data-v-8a71bbb4">立即预约</text></view></view></block></view>